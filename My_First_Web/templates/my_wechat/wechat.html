{% extends 'index.html' %}

{% block context %}
     <div class="row">
        <div id="city" style="width:100%;height:400px;color: white;"></div>
         <div id="province" style="width:70%;height:300px;color: white;" class="pull-left"></div>
         <div id="sex" style="width:30%;height:300px;color: white;" class="pull-right"></div>
     </div>
{% endblock %}
{% block bottom-js %}
    <script type="text/javascript">
        var myChart1 = echarts.init(document.getElementById('city'));
        var myChart2 = echarts.init(document.getElementById('province'));
        var myChart3 = echarts.init(document.getElementById('sex'));
        // 指定图表的配置项和数据
        var option1 = {
            title: {
                text: '微信地区分布',
                textStyle:{
                    color:'#fff',
                }
            },
            tooltip: {},
            legend: {
                data:['城市']
            },
            textStyle: {
                color: 'white'
            },
            xAxis:{
                axisLabel:{
                    textStyle:{
                        color:'#fff',
                    },
                },

                data:{{ city|safe }}
            },
            yAxis: {
                type:'value',
                axisLabel:{
                    textStyle:{
                        color:'#fff',
                    },
                },
            },
            series: [{
                name: '数量',
                type: 'bar',
                data:{{ city_count }}
            }]
        };
        var option2 = {
            title: {
                text: '微信省份分布',
                textStyle:{
                    color:'#fff',
                }
            },
            tooltip: {},
            legend: {
                data:['省份']
            },
            textStyle: {
                color: 'white'
            },
            xAxis:{
                axisLabel:{
                    textStyle:{
                        color:'#fff',
                    },
                },

                data:{{ province|safe }}
            },
            yAxis: {
                type:'value',
                axisLabel:{
                    textStyle:{
                        color:'#fff',
                    },
                },
            },
            series: [{
                name: '数量',
                type: 'bar',
                data:{{ province_count }}
            }]
        };
        var option3 = {
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b}: {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                x: 'left',
                data:['男','女','ELSE'],
                textStyle: {
                        color: '#fff'
                    }
            },
            series: [
                {
                    name:'性别',
                    type:'pie',
                    radius: ['50%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        normal: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            show: true,
                            textStyle: {
                                fontSize: '30',
                                fontWeight: 'bold'
                            }
                        }
                    },
                    labelLine: {
                        normal: {
                            show: false
                        }
                    },
                    data:[

                        {value:{{ male }}, name:'男'},
                        {value:{{ female }}, name:'女'},
                        {value:{{ el }}, name:'ELSE'},
                    ]
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart1.setOption(option1);
        myChart2.setOption(option2);
        myChart3.setOption(option3);
    </script>
{% endblock %}